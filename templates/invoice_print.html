<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Invoice {{ invoice.invoice_no }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
 <style>
    /* --- A4 Page Setup --- */
    @page {
      size: A4;
      margin: 15mm 15mm;
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: #fff;
      color: #000;
    }

    /* --- Invoice Container --- */
    .invoice-box {
      width: 100%;
      max-width: 700px;
      margin: 0 auto;
      border: 1px solid #ccc;
      padding: 20px 15px;
      box-sizing: border-box;
      page-break-inside: avoid;
    }

    .invoice-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .invoice-title {
      text-align: right;
    }

    .invoice-title h4 {
      margin-bottom: 5px;
    }

    .company-info p {
      margin: 2px 0;
      font-size: 12px;
      line-height: 1.4;
    }

    .invoice-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      font-size: 0.9rem;
    }

    .invoice-table th,
    .invoice-table td {
      padding: 6px 0;
      border-bottom: 1px solid #ccc;
    }

    .invoice-table th {
      background: #f8f9fa;
      text-align: left;
    }

    .invoice-table td:last-child {
      text-align: right;
    }

    .total-row td {
      font-weight: bold;
      border-top: 1px solid #000;
    }

    .note {
      font-style: italic;
      font-size: 11px;
      margin-top: 8px;
      line-height: 1.3;
    }

    .bank-details,
    .footer {
      font-size: 0.85rem;
      margin-top: 15px;
    }

    .signature {
      margin-top: 25px;
      text-align: left;
    }

    .signature img {
      max-height: 60px;
    }

    /* --- Prevent Page Overflow --- */
    .invoice-box,
    .invoice-header,
    .bank-details,
    .footer,
    .signature {
      page-break-inside: avoid;
    }

    /* Hide buttons if printed (for HTML previews) */
    @media print {
      button {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="invoice-box">
    <div class="invoice-header">
        <div class="d-flex align-items-center mb-4 w-100" style="gap: 10px;">
        <div>
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="RM Logo" style="max-height: 130px;">
        </div>
        <div class="company-info">
            <p class="mb-0" style="font-size:1rem;">
            <strong style="font-size: 1rem;">RAHMAD MEGA ENTERTAINMENT<br>(003544869-W)</strong><br>
            <span style="font-size:0.9rem;">15-01 Jalan Suria 7, Bandar Seri Alam<br>
            81750 Masai Johor<br>
            Tel: +6019-776 9900</style></span>
            </p>
        </div>
      <div class="invoice-title ms-auto text-end">
        <h4><strong>{{ invoice.doc_type }}</strong></h4>
        <span style="font-size:0.95rem;">
          {% if invoice.doc_type == 'INVOICE' %}
            <p><strong>Invoice No:</strong> {{ invoice.invoice_no }}<br>
            <strong>Date:</strong> {{ invoice.date }}</p>
          {% else %}
            <p><strong>Date:</strong> {{ invoice.date }}</p>
          {% endif %}
        </span>
      </div>
      </div>
    </div>
    <p class="ms-2" style="font-size: 0.9rem; font-weight: 500; margin-bottom: 0px;">
        <strong>Issued to:</strong><br></p>
    <p class="ms-2" style="font-size: 0.85rem;">
        {{ invoice.customer_name }}<br><br>
        {{ invoice.customer_address | replace('\n', '<br>') | safe }}
    </p>
    <table class="invoice-table">
        <thead>
            <tr>
            <th>Description</th>
            <th style="text-align: right;">Price (RM)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
            <td>
                Rahmad Mega Performance
                {% if invoice.song %}
                    [{{ invoice.song }} songs]
                {% endif %}<br><br>
                <span style="font-size:0.85rem;">
                Event: {{ invoice.event }}<br>
                Venue: {{ invoice.event_venue }}<br>
                Date: {{ invoice.event_date }}</span><br><br>
                <p class="note mt-2">NOTE: 50% deposit of payment need to be done for booking and the rest need to be paid on the day of the event.</p>
            </td>
            <td style="text-align: right; vertical-align: top;">{{ invoice.price }}</td>
            </tr>
            <tr class="total-row">
            <td style="text-align: right;"><strong>Total:</strong></td>
            <td style="text-align: right; white-space: nowrap;"><strong>RM {{ invoice.price }}</strong></td>
            </tr>
        </tbody>
    </table>

    <div class="bank-details">
      <p><strong>ACC NO:</strong> 551249594824<br>
      <strong>ACC HOLDER:</strong> RAHMAD MEGA ENTERTAINMENT<br>
      <strong>BANK NAME:</strong> MALAYAN BANKING BERHAD (MAYBANK)<br>
      <strong>AMOUNT (RM):</strong> {{ invoice.price_words }}</p>
    </div>

    <div class="footer">
      <p>For any enquiries, please do not hesitate to contact the undersigned.<br>Thank you.</p>
    </div>

    <div class="signature">
      <img src="{{ url_for('static', filename='img/signature.png') }}" alt="Signature" style="max-height: 60px;"><br>
      <strong>Faizah Ahmad</strong><br>
      Marketing Manager
    </div>
  </div>
</body>
</html>
